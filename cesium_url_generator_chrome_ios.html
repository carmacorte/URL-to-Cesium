<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Generador de URL para Cesium</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    label { display: block; margin-top: 10px; }
    input, button { font-size: 16px; padding: 5px; width: 100%; }
    textarea { width: 100%; height: 60px; margin-top: 10px; }
    .alerta {
      margin-top: 20px;
      color: red;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h2>Generador de URL para Cesium Lookup</h2>

  <label>UUTtype (ej: 73-102226-06)</label>
  <input type="text" id="uuttype" placeholder="Ejemplo: 73-102226-06" />

  <label>Fecha de inicio (YYYY-MM-DD)</label>
  <input type="date" id="startDate" />

  <label>Fecha de fin (YYYY-MM-DD)</label>
  <input type="date" id="endDate" />

  <button onclick="generarURL()">Generar URL</button>

  <label>URL generada:</label>
  <textarea id="outputURL" readonly></textarea>

  <button onclick="abrirURL()">Abrir URL</button>

  <div class="alerta">
    ⚠️ Nota: Aunque uses location=Fjz, Cesium puede mostrar datos de otras plantas si el UUTtype fue procesado en ellas. Este generador intenta forzar el filtrado usando un parámetro adicional.
  </div>

  <script>
    function generarURL() {
      const uut = document.getElementById("uuttype").value.trim();
      const start = document.getElementById("startDate").value;
      const end = document.getElementById("endDate").value;
      if (!uut || !start || !end) {
        alert("Por favor completa todos los campos.");
        return;
      }

      const url = `https://cesium.cisco.com/apps/PolarisSearch/AdvanceYield?SI=${uut}&uuttype=${uut}&SD=${start}&ED=${end}&datetype=nodate&yieldtype=firstpass&yielddatetype=rectime&location=Fjz&timezone=US%2FMountain`;
      document.getElementById("outputURL").value = url;
    }

    function abrirURL() {
      const url = document.getElementById("outputURL").value;
      if (url) {
        window.open(url, "_blank");
      } else {
        alert("Genera primero la URL.");
      }
    }
  </script>
</body>
</html>