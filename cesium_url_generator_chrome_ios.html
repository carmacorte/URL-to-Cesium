<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Generador de URL para Cesium (solo FJZ)</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
    }
    input, button, textarea {
      width: 100%;
      margin-top: 10px;
      font-size: 1em;
      padding: 5px;
    }
  </style>
</head>
<body>
  <h2>Generador de URL para Cesium (solo FJZ)</h2>

  <label>UUT Type (separado por comas si son varios):</label>
  <input type="text" id="uuttype" value="800-110945-01,800-110045-01" />

  <label>Fecha inicio:</label>
  <input type="date" id="startDate" />

  <label>Fecha fin:</label>
  <input type="date" id="endDate" />

  <label>URL generada:</label>
  <textarea id="urlOutput" rows="4" readonly></textarea>

  <button onclick="abrir()">Abrir en navegador</button>

  <script>
    function encodeUUT(input) {
      return input
        .split(',')
        .map(uut => uut.trim())
        .join(',');
    }

    function abrir() {
      const uuttype = encodeUUT(document.getElementById('uuttype').value);
      const SD = document.getElementById('startDate').value;
      const ED = document.getElementById('endDate').value;

      const baseURL = "https://cesium.cisco.com/apps/PolarisSearch/AdvanceYield?";
      const params = new URLSearchParams({
        SI: `${uuttype},Fjz`,
        SD: SD,
        ED: ED,
        datetype: 'nodate',
        yieldtype: 'firstpass',
        yielddatetype: 'rectime',
        uuttype: uuttype,
        location: 'Fjz',
        timezone: 'US/Mountain'
      });

      const finalURL = baseURL + params.toString();
      document.getElementById("urlOutput").value = finalURL;
      window.open(finalURL, '_blank');
    }

    // Asignar fecha actual por defecto
    const hoy = new Date().toISOString().split('T')[0];
    document.getElementById("startDate").value = hoy;
    document.getElementById("endDate").value = hoy;
  </script>
</body>
</html>